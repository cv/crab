#!/usr/bin/env ruby
# vim: set ft=ruby:
require 'crab'

class Crab::StoryMain

  def self.run
    cmd = ARGV.shift # get the subcommand

    case cmd
    when "-h", "--help", NilClass
      system "crab-story-help"
      exit 0
    end

    unless system("crab-story-#{cmd}", *ARGV)
      if $?.exitstatus == 127 # bash 'command not found'
        $stderr.puts "Unknown subcommand \"story #{cmd}\""
        system "crab-story-help"
        exit 127
      end
    end
  end
end

Crab::StoryMain.run
