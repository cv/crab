# vim: set ft=ruby :
require 'crab'

opts = Trollop::options do
  banner <<-BANNER
crab testcase show: displays a testcase in Rally as a Cucumber scenario

Usage: crab testcase show <testcase> [options]"
  BANNER
  opt :language, "Language to display Cucumber features in (ISO code)", :default => "en", :short => "-l"
end

id = ARGV.shift
unless id
  $stderr.puts "Error: No test case ID provided."
  system "crab-testcase-help"
  exit 1
end

Crab::Rally.new do |rally|
  tc = rally.find_test_case id
  puts Crab::CucumberScenario.new(opts[:language]).generate_from(tc).strip
end
