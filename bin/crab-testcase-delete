#!/usr/bin/env ruby
# vim: set ft=ruby :
require 'crab'

class Crab::TestCaseDelete

  def self.run
    Trollop::options do
      banner <<-BANNER
crab testcase delete: delete a test case in Rally

Usage: crab testcase delete <id> [options*]
      BANNER
      opt :dry, "Dry-run (don't change anything)", :short => "-D", :default => false
    end

    tc_id = ARGV.shift
    Crab::Rally.new(opts[:dry]) do |rally|
      tc = rally.find_test_case(tc_id)
      tc.delete
      puts "Test case #{tc_id} deleted."
    end
  end
end

Crab::TestCaseDelete.run
