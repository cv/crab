#!/usr/bin/env ruby
# vim: set ft=ruby :
require 'crab'

class Crab::Logout

  class << self

    include Crab::Utilities

    def run

      opts = Trollop::options do
        banner <<-BANNER
Usage: crab logout [options*]

Log out of Rally. Your credentials will be removed from ~/.crab/credentials.
        BANNER
        opt :dry, "Dry-run (don't change anything)", :short => "-D", :default => false
      end

      fileutils_opts = opts[:dry] ? {:noop => true, :verbose => true} : {}
      FileUtils.rm_rf(credentials_file, fileutils_opts)

      puts "Credentials removed for #{username}"

    end
  end
end

Crab::Logout.run
